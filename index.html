<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ANTYAVAN</title>
    <meta name="description"
        content="Press kit for ANTYAVAN — a horror mystery set in a cursed Indian forest. Explore sections by solving mini-puzzles." />

    <!-- Tailwind (CDN) for quick, clean styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- GSAP for subtle motion -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" defer></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Inter:wght@300;400;600;800&display=swap"
        rel="stylesheet">

    <style>
        :root {
            --bg: #0b0e11;
            --ink: #e6e0d6;
            --muted: #a89f93;
            --accent: #b97a36;
            --accent2: #3a9c8f;
            --danger: #ab2c2c;
        }

        html,
        body {
            height: 100%;
        }

        body {
            background: radial-gradient(1200px 800px at 70% -10%, rgba(185, 122, 54, .12), transparent 60%),
                radial-gradient(800px 600px at -10% 110%, rgba(58, 156, 143, .10), transparent 60%),
                #0b0e11;
            color: var(--ink);
            font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
        }

        .title {
            font-family: Inter, sans-serif;
            letter-spacing: .06em
        }

        .title2 {
            font-family: Inter, sans-serif;
        }

        .card {
            background: linear-gradient(180deg, rgba(255, 255, 255, .045), rgba(255, 255, 255, .02));
            border: 1px solid rgba(255, 255, 255, .06);
            box-shadow: 0 10px 30px rgba(0, 0, 0, .35);
        }

        .btn {
            background: linear-gradient(180deg, rgba(185, 122, 54, 0), rgba(185, 122, 54, 0));
            border: 1px solid rgba(255, 255, 255, .15);
        }

        .btn:hover {
            filter: brightness(1.08)
        }

        .chakra {
            filter: drop-shadow(0 0 8px rgba(58, 156, 143, .6))
        }

        /* Fireflies */
        #fireflies {
            position: fixed;
            inset: 0;
            z-index: 0;
            pointer-events: none
        }

        /* Draggable tokens */
        .token {
            user-select: none;
            cursor: grab
        }

        .token.dragging {
            cursor: grabbing;
            opacity: .85;
            transform: scale(1.05)
        }

        /* Subtle divider */
        .divide {
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, .15), transparent)
        }

        a.link {
            color: var(--accent2)
        }

        .head-text {
            font-family: "Inter", sans-serif;
        }

        .game-logo {
            height: 4rem;
            width: auto;
            object-fit: contain;
        }

        .studio-logo {
            height: 7rem;
            width: 6rem;
            object-fit: contain;
            filter: drop-shadow(0 0 4px rgba(185, 122, 54, .6));
        }

        .accordion-header {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.6s ease, opacity 0.6s ease;
            opacity: 0;
        }

        .accordion-content.open {
            opacity: 1;
            max-height: 2000px;
        }

        .locked .accordion-header::after {
            content: "ॐ";
            display: inline-block;
            margin-left: 0.5rem;
            margin-top: 0.5rem;
            font-weight: 900;
            font-size: 1.5rem;
            color: rgb(255, 0, 0);
        }

        .unlocked .accordion-header::after {
            content: "ॐ";
            display: inline-block;
            margin-left: 0.5rem;
            margin-top: 0.5rem;
            font-weight: 900;
            font-size: 1.5rem;
            text-shadow: #e6e0d6 0 0 5px, #b97a36 0 0 10px;
            color: rgb(255, 255, 255);
        }

        /* ====== Horizontal gallery (carousel) ====== */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .carousel-viewport {
            overflow-x: auto;
            overflow-y: hidden;
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            /* Edge fade (mask) */
            -webkit-mask-image: linear-gradient(to right, transparent, black 24px, black calc(100% - 24px), transparent);
            mask-image: linear-gradient(to right, transparent, black 24px, black calc(100% - 24px), transparent);
        }

        .carousel-item {
            scroll-snap-align: start;
            scroll-snap-stop: always;
            user-select: none;
        }

        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 2;
            width: 42px;
            height: 42px;
            border-radius: 9999px;
            display: grid;
            place-items: center;
            background: rgba(15, 18, 22, 0.7);
            border: 1px solid rgba(255, 255, 255, .15);
            backdrop-filter: blur(4px);
        }

        .carousel-btn[disabled] {
            opacity: .35;
            cursor: not-allowed;
        }

        .carousel-btn-left {
            left: 6px;
        }

        .carousel-btn-right {
            right: 6px;
        }
    </style>
</head>

<body class="relative overflow-x-hidden">
    <canvas id="fireflies"></canvas>

    <!-- Header -->
    <header class="relative z-10">
        <nav class="max-w-7xl mx-auto px-6 py-6 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <img src="./public/BrahmiStudiosLogoTransperant.png" class="studio-logo" alt="">
                |
                <!-- <svg class="w-9 h-9 chakra" viewBox="0 0 100 100" fill="none"> -->
                <circle cx="50" cy="50" r="48" stroke="rgba(185,122,54,.8)" stroke-width="2" />
                <polygon points="50,5 93,50 50,95 7,50" stroke="rgba(58,156,143,.9)" stroke-width="2"
                    fill="transparent" />
                <circle cx="50" cy="50" r="6" fill="rgba(58,156,143,1)" />
                </svg>
                <div>
                    <div class="title text-2xl font-extrabold tracking-widest">
                        <img src="./public/AntyavanLogo.png" class="game-logo" alt="">
                    </div>
                </div>
            </div>
            <div class="hidden md:flex gap-6 text-sm text-[color:var(--muted)]">
                <a href="#about" class="hover:text-white">About</a>
                <a href="#factsheet" class="hover:text-white">Factsheet</a>
                <a href="#media" class="hover:text-white">Media</a>
                <a href="#features" class="hover:text-white">Features</a>
                <a href="#contact" class="hover:text-white">Contact</a>
            </div>
            <a href="https://store.steampowered.com/app/3653870/ANTYAVAN/" target="_blank"
                class="btn px-4 py-2 rounded-2xl text-sm font-semibold shadow">Wishlist / Buy</a>
        </nav>
    </header>

    <!-- Hero / Mini-game intro -->
    <section class="relative z-10 max-w-7xl mx-auto px-6 pt-10 md:pt-16 grid md:grid-cols-2 gap-10 items-center">
        <div>
            <h1 class="head-text title text-4xl md:text-6xl leading-tight">ONE FOREST <span style="color: red;">SIX
                    VICES</span></h1>
            <p class="mt-4 text-[color:var(--muted)]">Unlock each section by solving small, lore-friendly puzzles
                inspired by Indian mythology. No jumpscares here—only wits.</p>

            <div class="mt-6 flex gap-3 flex-wrap">
                <button data-open-puzzle="intro" class="btn px-5 py-2 rounded-2xl font-semibold">Begin Trial</button>
                <a href="#media"
                    class="px-5 py-2 rounded-2xl font-semibold border border-white/15 hover:bg-white/5">Watch
                    Trailer</a>
            </div>

            <div class="mt-6 text-xs text-[color:var(--muted)]">Tip: Press <kbd
                    class="px-2 py-1 rounded bg-white/10">M</kbd> to mute ambience.</div>
        </div>
        <div class="card rounded-3xl p-6 relative overflow-hidden">
            <div
                class="absolute inset-0 bg-[radial-gradient(circle_at_20%_30%,rgba(58,156,143,.15),transparent_40%),radial-gradient(circle_at_90%_70%,rgba(185,122,54,.18),transparent_35%)]">
            </div>
            <div class="relative">
                <h3 class="title2 text-xl mb-2">Mantra Gate</h3>
                <p class="text-sm text-[color:var(--muted)]">Type the mantra to attune yourself: <span class="italic">ॐ
                        नमः शिवाय (om
                        namah shivaya)</span></p>
                <input id="mantra" type="text" placeholder="type here…"
                    class="mt-3 w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 focus:outline-none focus:ring-2 focus:ring-[color:var(--accent2)]" />
                <div id="mantraStatus" class="mt-2 text-sm"></div>
            </div>
        </div>
    </section>

    <div class="max-w-7xl mx-auto px-6 my-10">
        <div class="divide"></div>
    </div>

    <!-- ABOUT (locked by Puzzle A: Panchamahabhuta sort) -->
    <section id="about" class="relative z-10 max-w-7xl mx-auto px-6">
        <div class="card rounded-3xl p-7 md:p-10 relative locked" data-locked="true" data-puzzle="panch">
            <div class="flex items-center justify-between gap-6 flex-wrap">
                <h2 class="accordion-header title2 text-3xl">About the Game</h2>
                <button class="open-puzzle btn px-4 py-2 rounded-2xl font-semibold" data-open-puzzle="panch">Unlock with
                    Elements</button>
            </div>
            <div class="accordion-content text-[color:var(--muted)]">
                In <strong>ANTYAVAN</strong>, you step into a cursed forest in Arunachal Pradesh, where myth and memory
                intertwine.
                The Panchatattva — <em>Prithvi</em>, <em>Jal</em>, <em>Agni</em>, <em>Vayu</em>, and <em>Aakash</em> —
                have fallen silent,
                and Kaliyug’s six vices corrupt what remains.
                Guided only by whispers, symbols, and your own choices, you must restore balance before the forest
                consumes you.
                <ul class="grid md:grid-cols-2 gap-2 text-sm list-disc list-inside text-[color:var(--muted)]">
                    <li><strong>Setting:</strong> Mystical Arunachal Pradesh, blending tribal traditions and Hindu
                        spiritual philosophy.</li>
                    <li><strong>Perspective:</strong> First-person exploration with light survival mechanics.</li>
                    <li><strong>Playtime:</strong> A short, story-focused experience meant for a single atmospheric
                        sitting (1–2 hrs).</li>
                    <li><strong>Story Themes:</strong> Balance of nature, human weakness, spiritual awakening.</li>
                    <li><strong>No cheap jumpscares:</strong> Fear through silence, symbolism, and soundscapes.</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- FACTSHEET (locked by Puzzle B: 108 sliders) -->
    <section id="factsheet" class="relative z-10 max-w-7xl mx-auto px-6 mt-10">
        <div class="card rounded-3xl p-7 md:p-10 relative locked" data-locked="true" data-puzzle="sliders">
            <div class="flex items-center justify-between gap-6 flex-wrap">
                <h2 class="accordion-header text-3xl">Factsheet</h2>
                <button class="open-puzzle btn px-4 py-2 rounded-2xl font-semibold" data-open-puzzle="sliders">Unlock
                    with 108</button>
            </div>
            <dl class="accordion-content grid sm:grid-cols-2 lg:grid-cols-3 gap-x-10 gap-y-5 text-sm">
                <div>
                    <dt class="text-[color:var(--muted)]">Developer / Publisher</dt>
                    <dd class="font-semibold">Priyansh JS Yadav (Brahmi Studios)</dd>
                </div>
                <div>
                    <dt class="text-[color:var(--muted)]">Release</dt>
                    <dd class="font-semibold">5 Aug 2025</dd>
                </div>
                <div>
                    <dt class="text-[color:var(--muted)]">Platforms</dt>
                    <dd class="font-semibold">Windows, Mac, Linux</dd>
                </div>
                <div>
                    <dt class="text-[color:var(--muted)]">Price</dt>
                    <dd class="font-semibold">US$6.99</dd>
                </div>
                <div>
                    <dt class="text-[color:var(--muted)]">Engine</dt>
                    <dd class="font-semibold">Unreal Engine 5</dd>
                </div>
                <div>
                    <dt class="text-[color:var(--muted)]">Languages</dt>
                    <dd class="font-semibold">English (Interface & Subtitles)</dd>
                </div>
                <div>
                    <dt class="text-[color:var(--muted)]">Play Mode</dt>
                    <dd class="font-semibold">Single-player</dd>
                </div>
                <div>
                    <dt class="text-[color:var(--muted)]">Distribution</dt>
                    <dd class="font-semibold"><a class="link" target="_blank"
                            href="https://store.steampowered.com/app/3653870/ANTYAVAN/">Steam</a></dd>
                </div>
                <div>
                    <dt class="text-[color:var(--muted)]">Family Sharing</dt>
                    <dd class="font-semibold">Supported</dd>
                </div>
            </dl>
        </div>
    </section>

    <!--ABOUT THE DEVELOPER-->
    <section id="factsheet" class="relative z-10 max-w-7xl mx-auto px-6 mt-10">
        <div class="card rounded-3xl p-7 md:p-10 relative locked" data-locked="true" data-puzzle="sliders">
            <div class="flex items-center justify-between gap-6 flex-wrap">
                <h2 class="text-3xl">About The Developer</h2>
            </div>
            <br>
            <dl>
                <div>
                    I have been making this game for about 8 months. I had been curious about game development about 5
                    years ago and then had a break due to studies. In my college's 3rd year, I had that strike of idea
                    again. I am highly motivated to make games which display India's culture to different global
                    platforms. India as a country is a culturally diverse place with a number of different cultures
                    playing in the lap of mother nature.
                    As an indie developer, this is my first game and I aim to use the revenue generated here to make the
                    best of the Indian games that represent India and culture on the global level
                    <!-- <dt class="text-[color:var(--muted)]">Developer / Publisher</dt> -->
                    <br><br>
                    Priyansh JS Yadav
                </div>
            </dl>
        </div>
    </section>

    <!-- MEDIA (unlocked) -->
    <section id="media" class="relative z-10 max-w-7xl mx-auto px-6 mt-10">
        <div class="card rounded-3xl p-7 md:p-10">
            <div class="flex items-center justify-between gap-6 flex-wrap">
                <h2 class="text-3xl">Media</h2>
                <a href="https://www.youtube.com/watch?v=pU1mUbUGPbg" class="btn px-4 py-2 rounded-2xl font-semibold"
                    target="_blank">YouTube Trailer</a>
            </div>

            <div class="mt-6 grid md:grid-cols-2 gap-6">
                <div class="aspect-video rounded-2xl overflow-hidden border border-white/10">
                    <iframe class="w-full h-full" src="https://www.youtube.com/embed/pU1mUbUGPbg"
                        title="ANTYAVAN Trailer" allowfullscreen></iframe>
                </div>
                <div class="rounded-2xl p-5 bg-white/5 border border-white/10">
                    <h3 class="title2 text-xl">Downloadables</h3>
                    <p class="text-sm text-[color:var(--muted)] mt-2">Click to download</p>
                    <div class="mt-3 grid grid-cols-2 gap-3 text-sm">
                        <a class="px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10"
                            href="./public/AntyavanLogo.png" download>Logo (PNG)</a>
                        <a class="px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10"
                            href="./public/AntyavanMainCapsule.png" download>Key Art (JPG)</a>
                        <a class="px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10"
                            href="./public/screenshots/AntyavanGallery.zip" download>Screenshots (ZIP)</a>
                        <a class="px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10"
                            href="./public/presskit/PressKit_Antyavan.zip" download>Press Copy (PDF)</a>
                    </div>
                </div>
            </div>

            <!-- ======= NEW: Horizontal Screenshot Gallery (Carousel) ======= -->
            <div class="mt-10">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="title2 text-xl">Screenshots</h3>
                    <!-- <div class="flex gap-2">
                        <button id="galleryPrev" aria-label="Previous" class="carousel-btn carousel-btn-left">
                            <i class="fa-solid fa-chevron-left"></i>
                        </button>
                        <button id="galleryNext" aria-label="Next" class="carousel-btn carousel-btn-right">
                            <i class="fa-solid fa-chevron-right"></i>
                        </button>
                    </div> -->
                </div>

                <div id="galleryViewport" class="carousel-viewport no-scrollbar relative">
                    <div id="galleryTrack" class="flex gap-4 py-1">
                        <!-- Each item is fixed-width so it doesn't shrink; replace src with your real files -->
                        <figure class="carousel-item flex-none w-64 sm:w-72">
                            <img loading="lazy" src="./public/screenshots/2.png" alt="Cabin"
                                class="w-full h-40 sm:h-44 object-cover rounded-xl border border-white/10">
                            <figcaption class="text-xs font-semibold text-[color:var(--muted)] mt-2 px-1">कैबिन (Cabin)
                            </figcaption>
                        </figure>
                        <figure class="carousel-item flex-none w-64 sm:w-72">
                            <img loading="lazy" src="./public/screenshots/3.png" alt="Forest Range"
                                class="w-full h-40 sm:h-44 object-cover rounded-xl border border-white/10">
                            <figcaption class="text-xs font-semibold text-[color:var(--muted)] mt-2 px-1">वन सीमा
                                (Forest Range)</figcaption>
                        </figure>
                        <figure class="carousel-item flex-none w-64 sm:w-72">
                            <img loading="lazy" src="./public/screenshots/4.png" alt="Fireplace"
                                class="w-full h-40 sm:h-44 object-cover rounded-xl border border-white/10">
                            <figcaption class="text-xs font-semibold text-[color:var(--muted)] mt-2 px-1">अग्नि कुंड
                                (Fireplace)</figcaption>
                        </figure>
                        <figure class="carousel-item flex-none w-64 sm:w-72">
                            <img loading="lazy" src="./public/screenshots/5.png" alt="Sunlit Hut"
                                class="w-full h-40 sm:h-44 object-cover rounded-xl border border-white/10">
                            <figcaption class="text-xs font-semibold text-[color:var(--muted)] mt-2 px-1">झोपड़ी (Hut)
                            </figcaption>
                        </figure>
                        <figure class="carousel-item flex-none w-64 sm:w-72">
                            <img loading="lazy" src="./public/screenshots/6.png" alt=""
                                class="w-full h-40 sm:h-44 object-cover rounded-xl border border-white/10">
                            <figcaption class="text-xs font-semibold text-[color:var(--muted)] mt-2 px-1">महादेव (Lord
                                Shiva)</figcaption>
                        </figure>
                        <figure class="carousel-item flex-none w-64 sm:w-72">
                            <img loading="lazy" src="./public/screenshots/7.png" alt="Shivalinga"
                                class="w-full h-40 sm:h-44 object-cover rounded-xl border border-white/10">
                            <figcaption class="text-xs font-semibold text-[color:var(--muted)] mt-2 px-1">शिवलिंग
                                (Shivalinga)</figcaption>
                        </figure>
                        <figure class="carousel-item flex-none w-64 sm:w-72">
                            <img loading="lazy" src="./public/screenshots/8.png" alt="मंदिर (Temple)"
                                class="w-full h-40 sm:h-44 object-cover rounded-xl border border-white/10">
                            <figcaption class="text-xs font-semibold text-[color:var(--muted)] mt-2 px-1">मंदिर (Temple)
                            </figcaption>
                        </figure>
                        <figure class="carousel-item flex-none w-64 sm:w-72">
                            <img loading="lazy" src="./public/screenshots/9.png" alt="Whispering trees"
                                class="w-full h-40 sm:h-44 object-cover rounded-xl border border-white/10">
                            <figcaption class="text-s font-semibold text-[color:var(--muted)] mt-2 px-1">अंजनी पुत्र
                                (Lord Hanuman)</figcaption>
                        </figure>
                    </div>
                </div>
                <p class="text-xs text-[color:var(--muted)] mt-2">Scroll to view the images</p>
            </div>
            <!-- ======= /Gallery ======= -->
        </div>
    </section>

    <!-- FEATURES (locked by Puzzle C: Six Vices match) -->
    <section id="features" class="relative z-10 max-w-7xl mx-auto px-6 mt-10">
        <div class="card rounded-3xl p-7 md:p-10 relative locked" data-locked="true" data-puzzle="vices">
            <div class="flex items-center justify-between gap-6 flex-wrap">
                <h2 class="accordion-header text-3xl">Features</h2>
                <button class="open-puzzle btn px-4 py-2 rounded-2xl font-semibold" data-open-puzzle="vices">Unlock the
                    Six</button>
            </div>
            <ul
                class="accordion-content grid md:grid-cols-2 gap-2 text-sm list-disc list-inside text-[color:var(--muted)]">
                <li>Explore six houses, each embodying one of the six vices: <em>Kāma</em>, <em>Krodha</em>,
                    <em>Lobha</em>, <em>Moha</em>, <em>Mada</em>, <em>Mātsarya</em>.
                </li>
                <li>Environmental puzzles woven into shrines, idols, instruments, and tribal architecture.</li>
                <li>Haunting atmosphere — sound design layered with Vedic textures, chants, and whispers.</li>
                <li>Short but dense experience — no filler, only meaningful progression.</li>
                <li>Runs on modest PCs — optimized for GTX 1650-class GPUs.</li>
            </ul>
        </div>
    </section>

    <!-- CONTACT (always open) -->
    <section id="contact" class="relative z-10 max-w-7xl mx-auto px-6 mt-10 mb-20">
        <div class="card rounded-3xl p-7 md:p-10">
            <h2 class="title text-3xl">Contact</h2>
            <div class="mt-4 grid md:grid-cols-2 gap-6 text-sm">
                <div>
                    <div class="text-[color:var(--muted)]">Press / Keys / Interviews</div>
                    <div class="font-semibold">Email: <a class="link"
                            href="mailto:brahmistudios9397@gmail.com">brahmistudios9397@gmail.com</a></div>
                </div>
                <div>
                    <div class="text-[color:var(--muted)]">Storefront</div>
                    <div class="font-semibold"><a class="link" target="_blank"
                            href="https://store.steampowered.com/app/3653870/ANTYAVAN/">Steam: ANTYAVAN</a></div>
                </div>
                <div>
                    <div class="text-[color:var(--muted)]">Instagram</div>
                    <div class="font-semibold"><a class="link" target="_blank"
                            href="https://www.instagram.com/priyansh.jsy/">priyansh.jsy</a></div>
                </div>
            </div>
        </div>
    </section>

    <!-- MODALS / PUZZLES -->
    <dialog id="dlg-intro" class="backdrop:bg-black/70 rounded-2xl w-[min(680px,92vw)] bg-black text-white">
        <form method="dialog" class="p-0 m-0">
            <div class="card rounded-2xl">
                <div class="p-6 md:p-8">
                    <h3 class="title text-2xl">परीक्षा - Trial</h3>
                    <p class="mt-2 text-sm text-[color:var(--muted)]">Answer correctly to earn a blessing that weakens
                        the curse.</p>
                    <ol class="mt-4 text-sm list-decimal list-inside space-y-3">
                        <li>Which five elements (<em>पंच महाभूत</em>) compose the world?
                            <div class="mt-2 grid grid-cols-2 md:grid-cols-5 gap-2" id="intro-q1">
                                <label
                                    class="flex items-center gap-2 p-2 rounded-xl bg-white/5 border border-white/10"><input
                                        type="checkbox" value="prithvi"> <span>पृथ्वी (Earth)</span></label>
                                <label
                                    class="flex items-center gap-2 p-2 rounded-xl bg-white/5 border border-white/10"><input
                                        type="checkbox" value="ap"> <span>जल (Water)</span></label>
                                <label
                                    class="flex items-center gap-2 p-2 rounded-xl bg-white/5 border border-white/10"><input
                                        type="checkbox" value="tejas"> <span>अग्नि (Fire)</span></label>
                                <label
                                    class="flex items-center gap-2 p-2 rounded-xl bg-white/5 border border-white/10"><input
                                        type="checkbox" value="vayu"> <span>वायु (Air)</span></label>
                                <label
                                    class="flex items-center gap-2 p-2 rounded-xl bg-white/5 border border-white/10"><input
                                        type="checkbox" value="akasha"> <span>आकाश (Space)</span></label>
                                <label
                                    class="flex items-center gap-2 p-2 rounded-xl bg-white/5 border border-white/10"><input
                                        type="checkbox" value="manas"> <span>मानस (Mind)</span></label>
                            </div>
                        </li>
                        <li>How many sacred beads often string a <em>japa</em> mala?
                            <div class="mt-2"><input id="intro-q2" placeholder="number"
                                    class="w-32 px-3 py-2 rounded-xl bg-white/5 border border-white/10" /></div>
                        </li>
                    </ol>
                    <div id="intro-status" class="mt-3 text-sm"></div>
                    <div class="mt-6 flex items-center gap-3">
                        <button id="btn-intro-check" class="btn px-4 py-2 rounded-xl font-semibold"
                            value="default">Check</button>
                        <button class="px-4 py-2 rounded-xl border border-white/15" value="cancel">Close</button>
                    </div>
                </div>
            </div>
        </form>
    </dialog>

    <dialog id="dlg-panch" class="backdrop:bg-black/70 rounded-2xl w-[min(780px,94vw)] bg-black text-white">
        <form method="dialog" class="p-0 m-0">
            <div class="card rounded-2xl">
                <div class="p-6 md:p-8">
                    <h3 class="title text-2xl">Arrange the Elements</h3>
                    <p class="mt-2 text-sm text-[color:var(--muted)]">Drag tokens into the altar in the order: Earth →
                        Water → Fire → Air → Ether.</p>
                    <div class="mt-4 grid md:grid-cols-5 gap-3">
                        <div class="token px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-center"
                            draggable="true" data-el="prithvi">Prithvi</div>
                        <div class="token px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-center"
                            draggable="true" data-el="ap">Ap/Jal</div>
                        <div class="token px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-center"
                            draggable="true" data-el="tejas">Tejas</div>
                        <div class="token px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-center"
                            draggable="true" data-el="vayu">Vayu</div>
                        <div class="token px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-center"
                            draggable="true" data-el="akasha">Akasha</div>
                    </div>
                    <div class="mt-5 p-4 rounded-2xl border border-white/10 bg-white/5">
                        <div class="text-xs text-[color:var(--muted)] mb-2">Altar</div>
                        <div id="altar" class="min-h-[64px] flex flex-wrap gap-2"></div>
                    </div>
                    <div id="panch-status" class="mt-3 text-sm"></div>
                    <div class="mt-6 flex items-center gap-3">
                        <button id="btn-panch-check" class="btn px-4 py-2 rounded-xl font-semibold"
                            value="default">Check</button>
                        <button class="px-4 py-2 rounded-xl border border-white/15" value="cancel">Close</button>
                    </div>
                </div>
            </div>
        </form>
    </dialog>

    <dialog id="dlg-sliders" class="backdrop:bg-black/70 rounded-2xl w-[min(720px,94vw)] bg-black text-white">
        <form method="dialog" class="p-0 m-0">
            <div class="card rounded-2xl">
                <div class="p-6 md:p-8">
                    <h3 class="title text-2xl">Sacred Number</h3>
                    <p class="mt-2 text-sm text-[color:var(--muted)]">Align the dials to the mantra count.</p>
                    <div class="mt-4 grid grid-cols-4 gap-4">
                        <input type="range" min="0" max="9" value="0" class="dial">
                        <input type="range" min="0" max="9" value="0" class="dial">
                        <input type="range" min="0" max="9" value="0" class="dial">
                        <input type="range" min="0" max="9" value="0" class="dial">
                    </div>
                    <div class="mt-3 text-sm" id="sliders-read">0000</div>
                    <div id="sliders-status" class="mt-1 text-sm"></div>
                    <div class="mt-6 flex items-center gap-3">
                        <button id="btn-sliders-check" class="btn px-4 py-2 rounded-xl font-semibold"
                            value="default">Check</button>
                        <button class="px-4 py-2 rounded-xl border border-white/15" value="cancel">Close</button>
                    </div>
                </div>
            </div>
        </form>
    </dialog>

    <dialog id="dlg-vices" class="backdrop:bg-black/70 rounded-2xl w-[min(780px,94vw)] bg-black text-white">
        <form method="dialog" class="p-0 m-0">
            <div class="card rounded-2xl">
                <div class="p-6 md:p-8">
                    <h3 class="title text-2xl">Name the Six</h3>
                    <p class="mt-2 text-sm text-[color:var(--muted)]">Match each vice to its Sanskrit term.</p>
                    <div class="mt-5 grid md:grid-cols-2 gap-5">
                        <div class="space-y-2">
                            <div
                                class="p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between">
                                <span>Lust</span><select class="sel vice bg-black text-white" data-ans="kama">
                                    <option>—</option>
                                    <option>kama</option>
                                    <option>krodha</option>
                                    <option>lobha</option>
                                    <option>moha</option>
                                    <option>mada</option>
                                    <option>matsarya</option>
                                </select>
                            </div>
                            <div
                                class="p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between">
                                <span>Anger</span><select class="sel vice bg-black text-white" data-ans="krodha">
                                    <option>—</option>
                                    <option>kama</option>
                                    <option>krodha</option>
                                    <option>lobha</option>
                                    <option>moha</option>
                                    <option>mada</option>
                                    <option>matsarya</option>
                                </select>
                            </div>
                            <div
                                class="p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between">
                                <span>Greed</span><select class="sel vice bg-black text-white" data-ans="lobha">
                                    <option>—</option>
                                    <option>kama</option>
                                    <option>krodha</option>
                                    <option>lobha</option>
                                    <option>moha</option>
                                    <option>mada</option>
                                    <option>matsarya</option>
                                </select>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div
                                class="p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between">
                                <span>Attachment</span><select class="sel vice bg-black text-white" data-ans="moha">
                                    <option>—</option>
                                    <option>kama</option>
                                    <option>krodha</option>
                                    <option>lobha</option>
                                    <option>moha</option>
                                    <option>mada</option>
                                    <option>matsarya</option>
                                </select>
                            </div>
                            <div
                                class="p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between">
                                <span>Ego / Pride</span><select class="sel vice bg-black text-white" data-ans="mada">
                                    <option>—</option>
                                    <option>kama</option>
                                    <option>krodha</option>
                                    <option>lobha</option>
                                    <option>moha</option>
                                    <option>mada</option>
                                    <option>matsarya</option>
                                </select>
                            </div>
                            <div
                                class="p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between">
                                <span>Envy</span><select class="sel vice bg-black text-white" data-ans="matsarya"">
                                    <option>—</option>
                                    <option>kama</option>
                                    <option>krodha</option>
                                    <option>lobha</option>
                                    <option>moha</option>
                                    <option>mada</option>
                                    <option>matsarya</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div id=" vices-status" class="mt-3 text-sm">
                            </div>
                            <div class="mt-6 flex items-center gap-3">
                                <button id="btn-vices-check" class="btn px-4 py-2 rounded-xl font-semibold"
                                    value="default">Check</button>
                                <button class="px-4 py-2 rounded-xl border border-white/15"
                                    value="cancel">Close</button>
                            </div>
                        </div>
                    </div>
        </form>
    </dialog>

    <!-- AUDIO ambience -->
    <audio id="ambience" loop autoplay volume="0.01" preload="auto">
        <source src="./public/audio/eerie-criminal-atmosphere-310155.mp3" type="audio/mpeg" />
    </audio>

    <script>
        // ===== Canvas Fireflies =====
        const canvas = document.getElementById('fireflies');
        const ctx = canvas.getContext('2d');
        let W, H, flies = [];
        function resize() { W = canvas.width = innerWidth; H = canvas.height = innerHeight; }
        addEventListener('resize', resize); resize();
        function spawn(n = 60) {
            flies = Array.from({ length: n }, () => ({
                x: Math.random() * W,
                y: Math.random() * H,
                r: 0.6 + Math.random() * 1.8,
                a: Math.random() * Math.PI * 2,
                s: 0.2 + Math.random() * 0.6,
                t: Math.random() * 1000
            }));
        }
        spawn();
        function tick(t) {
            ctx.clearRect(0, 0, W, H);
            for (const f of flies) {
                f.a += (Math.sin((t + f.t) / 1000) + 1) * 0.002; // gentle drift
                f.x += Math.cos(f.a) * f.s;
                f.y += Math.sin(f.a) * f.s * 0.6;
                if (f.x < 0) f.x = W; if (f.x > W) f.x = 0; if (f.y < 0) f.y = H; if (f.y > H) f.y = 0;
                const glow = 0.3 + 0.7 * Math.abs(Math.sin((t + f.t) / 800));
                ctx.beginPath();
                ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(58,156,143,${glow})`;
                ctx.shadowColor = 'rgba(58,156,143,.6)';
                ctx.shadowBlur = 8;
                ctx.fill();
                ctx.shadowBlur = 0;
            }
            requestAnimationFrame(tick);
        } requestAnimationFrame(tick);

        // ===== Ambience control =====
        const audio = document.getElementById('ambience');
        let audioReady = false;
        document.addEventListener('click', () => { if (!audioReady) { audio.volume = 0.25; audio.play().catch(() => { }); audioReady = true; } }, { once: true });
        document.addEventListener('keydown', (e) => { if (e.key.toLowerCase() === 'm') { if (audio.paused) { audio.play() } else { audio.pause() } } });

        // ===== Mantra mini-game =====
        const mantra = document.getElementById('mantra');
        const mantraStatus = document.getElementById('mantraStatus');
        mantra.addEventListener('input', () => {
            const val = mantra.value.trim().toLowerCase().replace(/\s+/g, ' ');
            if (val === 'om namah shivaya' || val === "ॐ नमः शिवाय") {
                mantraStatus.textContent = '✨ The forest listens.';
                mantraStatus.className = 'mt-2 text-sm text-emerald-400';
                confetti();
            } else if (val && 'om namah shivaya'.startsWith(val) || val && 'ॐ नमः शिवाय'.startsWith(val)) {
                mantraStatus.textContent = '…keep chanting';
                mantraStatus.className = 'mt-2 text-sm text-[color:var(--muted)]';
            } else if (val) {
                mantraStatus.textContent = 'The mantra feels off.';
                mantraStatus.className = 'mt-2 text-sm text-amber-400';
            } else { mantraStatus.textContent = ''; }
        });

        // ===== Dialog helpers =====
        const openers = document.querySelectorAll('[data-open-puzzle], .open-puzzle');
        openers.forEach(btn => btn.addEventListener('click', () => {
            const id = btn.dataset.openPuzzle;
            const dlg = document.getElementById(`dlg-${id}`);
            if (dlg) dlg.showModal();
        }));

        // ===== Intro quiz =====
        document.getElementById('btn-intro-check').addEventListener('click', (e) => {
            e.preventDefault();
            const ans1 = Array.from(document.querySelectorAll('#intro-q1 input:checked')).map(x => x.value);
            const correct1 = ['prithvi', 'ap', 'tejas', 'vayu', 'akasha'];
            const ok1 = correct1.every(c => ans1.includes(c)) && ans1.length === 5;
            const ok2 = (document.getElementById('intro-q2').value.trim() === '108');
            const st = document.getElementById('intro-status');
            if (ok1 && ok2) {
                st.textContent = 'Blessing granted. Sections weaken.'; st.className = 'mt-3 text-sm text-emerald-400'; confetti();
            } else {
                st.textContent = 'The forest remains silent.'; st.className = 'mt-3 text-sm text-amber-400';
            }
        });

        // ===== Panchamahabhuta drag order =====
        const altar = document.getElementById('altar');
        const order = ['prithvi', 'ap', 'tejas', 'vayu', 'akasha'];
        let placed = [];
        document.querySelectorAll('.token').forEach(tok => {
            tok.addEventListener('dragstart', () => { tok.classList.add('dragging'); });
            tok.addEventListener('dragend', () => { tok.classList.remove('dragging'); });
        });
        altar.addEventListener('dragover', (e) => { e.preventDefault(); });
        altar.addEventListener('drop', (e) => {
            e.preventDefault();
            const dragging = document.querySelector('.token.dragging');
            if (!dragging) return;
            altar.appendChild(dragging);
            placed = Array.from(altar.querySelectorAll('.token')).map(t => t.dataset.el);
        });
        document.getElementById('btn-panch-check').addEventListener('click', (e) => {
            e.preventDefault();
            const st = document.getElementById('panch-status');
            if (JSON.stringify(placed) === JSON.stringify(order)) {
                st.textContent = 'The altar glows. About unlocked.'; st.className = 'mt-3 text-sm text-emerald-400';
                unlock('about'); confetti();
            } else {
                st.textContent = 'The tokens feel misaligned.'; st.className = 'mt-3 text-sm text-amber-400';
            }
        });

        // ===== Sliders 1080 =====
        const dials = document.querySelectorAll('#dlg-sliders .dial');
        const dialRead = document.getElementById('sliders-read');
        dials.forEach(d => d.addEventListener('input', () => {
            const code = Array.from(dials).map(x => x.value).join('');
            dialRead.textContent = code;
        }));
        document.getElementById('btn-sliders-check').addEventListener('click', (e) => {
            e.preventDefault();
            const code = Array.from(dials).map(x => x.value).join('');
            const st = document.getElementById('sliders-status');
            if (code === '0108' || code === '1080') {
                st.textContent = 'Numerology aligns. Factsheet unlocked.'; st.className = 'mt-3 text-sm text-emerald-400';
                unlock('factsheet'); confetti();
            } else { st.textContent = 'Not quite sacred yet.'; st.className = 'mt-3 text-sm text-amber-400'; }
        });

        // ===== Vices match =====
        document.getElementById('btn-vices-check').addEventListener('click', (e) => {
            e.preventDefault();
            const sels = Array.from(document.querySelectorAll('#dlg-vices .sel'));
            const ok = sels.every(s => s.value === s.dataset.ans);
            const st = document.getElementById('vices-status');
            if (ok) { st.textContent = 'You have named the Six. Features unlocked.'; st.className = 'mt-3 text-sm text-emerald-400'; unlock('features'); confetti(); }
            else { st.textContent = 'Misnamed shadows linger.'; st.className = 'mt-3 text-sm text-amber-400'; }
        });

        // ===== Unlock helper =====
        function unlock(sectionId) {
            const sec = document.querySelector(`#${sectionId} [data-locked]`);
            if (!sec) return; sec.dataset.locked = 'false'; sec.classList.remove('locked'); sec.classList.add('unlocked');
            const content = sec.querySelector(".accordion-content");
            if (content) content.classList.add("open");
        }

        // ===== Simple confetti (canvas bursts) =====
        function confetti() {
            const burst = 60;
            for (let i = 0; i < burst; i++) {
                const p = { x: innerWidth / 2, y: 120, a: Math.random() * Math.PI * 2, v: 2 + Math.random() * 3, life: 50 + Math.random() * 30 };
                animateSpark(p);
            }
        }
        function animateSpark(p) {
            let life = p.life;
            function step() {
                ctx.beginPath();
                ctx.arc(p.x, p.y, 1.6, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(185,122,54,.9)'; ctx.fill();
                p.x += Math.cos(p.a) * p.v; p.y += Math.sin(p.a) * p.v; p.v *= 0.98; life--;
                if (life > 0) requestAnimationFrame(step);
            } step();
        }

        // Animate hero elements
        window.addEventListener('load', () => {
            if (window.gsap) {
                gsap.from('.title', { y: 10, opacity: 0, duration: .8, ease: 'power2.out', stagger: .05 });
                gsap.from('header nav a, header .btn', { opacity: 0, y: -6, duration: .6, stagger: .05 });
                gsap.from('#media .card', { opacity: 0, y: 20, duration: .8, ease: 'power2.out' });
            }
        });

        function unlockAccordion(key) {
            const sec = document.querySelector(`[data-puzzle="${key}"]`);
            if (!sec) return;
            sec.classList.remove("locked");
            sec.classList.add("unlocked");
            const content = sec.querySelector(".accordion-content");
            if (content) content.classList.add("open");
        }

        // Example: After puzzle check (kept from your version)
        document.getElementById("btn-panch-check").addEventListener("click", e => {
            // e.preventDefault(); // already prevented above
            // const correct = true; // your demo override
            // if (correct) {
            //     unlockAccordion("panch");
            //     document.getElementById("dlg-panch").close();
            // }
        });

        // ======= Carousel logic (buttons, drag, wheel-redirect) =======
        const vp = document.getElementById('galleryViewport');
        const prevBtn = document.getElementById('galleryPrev');
        const nextBtn = document.getElementById('galleryNext');

        function updateButtons() {
            const maxScroll = vp.scrollWidth - vp.clientWidth - 2; // tolerance
            prevBtn.disabled = vp.scrollLeft <= 1;
            nextBtn.disabled = vp.scrollLeft >= maxScroll;
        }

        function scrollByAmount(dir = 1) {
            const card = vp.querySelector('.carousel-item');
            const amount = card ? card.getBoundingClientRect().width + 16 /* gap */ : vp.clientWidth * 0.9;
            vp.scrollBy({ left: dir * amount, behavior: 'smooth' });
        }

        prevBtn.addEventListener('click', () => scrollByAmount(-1));
        nextBtn.addEventListener('click', () => scrollByAmount(1));
        vp.addEventListener('scroll', updateButtons);
        window.addEventListener('resize', updateButtons);
        updateButtons();

        // Drag-to-scroll (desktop)
        let isDown = false, startX = 0, startLeft = 0, pointerId = null;
        vp.addEventListener('pointerdown', (e) => {
            isDown = true;
            pointerId = e.pointerId;
            vp.setPointerCapture(pointerId);
            startX = e.clientX;
            startLeft = vp.scrollLeft;
            vp.style.cursor = 'grabbing';
        });
        vp.addEventListener('pointermove', (e) => {
            if (!isDown) return;
            const dx = e.clientX - startX;
            vp.scrollLeft = startLeft - dx;
        });
        function endDrag() {
            if (!isDown) return;
            isDown = false;
            if (pointerId !== null) try { vp.releasePointerCapture(pointerId); } catch { }
            pointerId = null;
            vp.style.cursor = '';
        }
        vp.addEventListener('pointerup', endDrag);
        vp.addEventListener('pointercancel', endDrag);
        vp.addEventListener('mouseleave', endDrag);

        // Convert vertical wheel to horizontal scroll inside gallery
        vp.addEventListener('wheel', (e) => {
            if (Math.abs(e.deltaY) > Math.abs(e.deltaX)) {
                vp.scrollLeft += e.deltaY;
                e.preventDefault();
            }
        }, { passive: false });

        // Arrow keys when focused
        vp.tabIndex = 0;
        vp.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') { scrollByAmount(1); e.preventDefault(); }
            if (e.key === 'ArrowLeft') { scrollByAmount(-1); e.preventDefault(); }
        });
    </script>
</body>

</html>
